\chapter{Spring}
\label{spring}

Afin de prendre en main le framework Spring et la notion d'injection de dépendance, nous avons au préalable migré les classes de pioches. Instanciés alors via des définitions Json, nous avons donc traduit ces définitions en Beans. Nous avons ensuite étendu l'ensemble des composants Spring du projet.\\
Il s'est avéré que la spécification d'objet sous forme de bean (XML) est plus simple que les définitions en Json. La récupération des objets est également simplifié par rapport à un parsing Json.

\section{Notre Spring}

\subsection{Composants}

\begin{itemize}
   \item PlotsDeck : la core.takenoko.pioche est créée à partir de définition de beans de Parcelles.\\ \item ObjectivesDeck : différentes pioches peuvent être créées selon le type de cartes objectives (beans).\\ \item Plateau : le plateau de base de takenoko est obtenu via un bean.\\ \item Joueur : différents type de joueur peut être instancié via des beans avec pour chacun une stratégie qui lui est propre.\\ \item Game : une partie est paramétrable selon les composants cités ci-dessus.\\ \item GameStarter : peut être paramétré via les paramètres de l'application spring (nombre de parties / modes du Logger).
\end{itemize}

\subsection{Contextes}

Notre projet est pourvu de deux contextes, un pour l'exécution du programme et l'autre pour l'environnement de test. Cela nous permet de tester notre projet dans un environnement que l'on peut définir et qui peut donc être très différent d'une partie "normal" du jeu. Cela nous permet de tester le projet dans des situations plus inattendues.

\subsection{Paramétrisation}

L'ajout de l'injection de dépendance permet une grande flexibilité dans la configuration de nos parties et des composants qui la compose. Ainsi, sans toucher au code Java, on peut ajouter un deuxième type de partie où le nombre de joueurs ainsi que les stratégies de ceux-ci sont différents.\\ Il est également plus facile de créer un grand ensemble de parties destinées à être joué par la suite en demandant simplement la création d'un objet selon le nom d'un bean.